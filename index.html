<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Album Pinterest Style</title>
<style>
body {
  font-family: Arial, sans-serif;
  background:#f5f5f5;
  display:flex;
  justify-content:center;
  padding:20px;
}

.controls {
  width:300px;
  margin-right:40px;
}

.controls input, .controls textarea, .controls button {
  width:100%;
  margin:8px 0;
  padding:8px;
  font-size:14px;
}

.color-palette {
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:8px 0;
}

.color-circle {
  width:30px;
  height:30px;
  border-radius:50%;
  cursor:pointer;
  border:2px solid white;
  box-shadow:0 0 2px rgba(0,0,0,0.5);
}

.album-container {
  width:400px;
  height:600px;
  background:#fff;
  border-radius:15px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  padding:10px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
}

.cover-image {
  width:100%;
  height:50%; /* moitié du rectangle */
  border-radius:10px;
  overflow:hidden;
  background:#111;
  margin-bottom:10px;
  display:flex;
  justify-content:center;
  align-items:center;
}

.cover-image img {
  width:100%;
  height:100%;
  object-fit:cover;
}

.album-info {
  flex:1;
  display:flex;
  flex-direction:column;
  gap:5px;
}

.title-row {
  display:flex;
  align-items:flex-end;
  gap:8px;
}

/* Titre de l’album : majuscules, plus gros, gras */
.album-title {
  font-size:32px; /* plus gros */
  font-weight:bold; /* gras */
  text-transform:uppercase; /* majuscule */
}

.date {
  font-size:14px; /* petite date à côté */
  opacity:0.7;
}

.album-artist {
  font-size:16px;
  color:#333;
}

.tracklist {
  font-size:14px;
  opacity:0.8;
  display:flex;
  justify-content:space-between;
}

#left-tracks, #right-tracks {
  width:48%;
}

button {
  cursor:pointer;
  background:#111;
  color:white;
  border:none;
  border-radius:5px;
}

button:hover {
  background:#333;
}
</style>
</head>
<body>

<div class="controls">
  <h2>Créer ton album cover</h2>
  <input id="title" placeholder="Titre de l'album">
  <input id="artist" placeholder="Nom de l'artiste">
  <input id="year" placeholder="Année">
  <textarea id="tracks" placeholder="Liste des chansons, une par ligne (facultatif)"></textarea>
  
  <!-- Image acceptant PNG, JPEG et JPG -->
  <input type="file" id="bgImage" accept="image/png, image/jpeg, image/jpg" required>

  <h4>Choisir la couleur du fond :</h4>
  <div class="color-palette">
    <div class="color-circle" style="background:#e63946" onclick="changeBackground('#e63946')"></div>
    <div class="color-circle" style="background:#f1faee" onclick="changeBackground('#f1faee')"></div>
    <div class="color-circle" style="background:#a8dadc" onclick="changeBackground('#a8dadc')"></div>
    <div class="color-circle" style="background:#457b9d" onclick="changeBackground('#457b9d')"></div>
    <div class="color-circle" style="background:#ffbe0b" onclick="changeBackground('#ffbe0b')"></div>
    <div class="color-circle" style="background:#ff006e" onclick="changeBackground('#ff006e')"></div>
    <!-- Sélecteur complet de couleurs -->
    <input type="color" id="fullColorPicker" value="#ffffff" 
           onchange="changeBackground(this.value)" style="margin-left:10px; cursor:pointer; width:40px; height:30px; border:none; padding:0;">
  </div>

  <button onclick="generate()">Générer la cover</button>
  <button onclick="downloadCover()">Télécharger en PNG</button>
</div>

<div class="album-container" id="album">
  <div class="cover-image" id="cover-image"></div>
  <div class="album-info">
    <div class="title-row">
      <div class="album-title" id="album-title">Titre</div>
      <div class="date" id="album-year">2024</div>
    </div>
    <div class="album-artist" id="album-artist">Artiste</div>
    <div class="tracklist">
      <div id="left-tracks"></div>
      <div id="right-tracks"></div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
let selectedColor = '#fff';

function changeBackground(color){
  selectedColor=color;
  document.getElementById("album").style.background=selectedColor;
}

function generate(){
  const title=document.getElementById("title").value||"Titre";
  const artist=document.getElementById("artist").value||"Artiste";
  const year=document.getElementById("year").value||"2024";
  const tracks=document.getElementById("tracks").value.split('\n').filter(t=>t.trim()!=="");
  const bgFile=document.getElementById("bgImage").files[0];

  // Vérification : fichier image valide (PNG, JPEG, JPG)
  if(!bgFile || !bgFile.type.startsWith("image/")){
    alert("Veuillez sélectionner un fichier image valide (PNG, JPEG ou JPG) !");
    return;
  }

  document.getElementById("album-title").innerText=title;
  document.getElementById("album-artist").innerText=artist;
  document.getElementById("album-year").innerText=year;

  const leftTracks=document.getElementById("left-tracks");
  const rightTracks=document.getElementById("right-tracks");
  if(tracks.length>0){
    const middle=Math.ceil(tracks.length/2);
    leftTracks.innerHTML=tracks.slice(0,middle).join('<br>');
    rightTracks.innerHTML=tracks.slice(middle).join('<br>');
  }else{
    leftTracks.innerHTML='';
    rightTracks.innerHTML='';
  }

  const coverDiv=document.getElementById("cover-image");
  coverDiv.innerHTML='';
  const reader=new FileReader();
  reader.onload=function(e){
    const img=document.createElement('img');
    img.src=e.target.result;
    coverDiv.appendChild(img);
  }
  reader.readAsDataURL(bgFile);
}

function downloadCover(){
  html2canvas(document.getElementById("album")).then(canvas=>{
    const link=document.createElement('a');
    link.download='album-cover.png';
    link.href=canvas.toDataURL();
    link.click();
  });
}
</script>
</body>
</html>
